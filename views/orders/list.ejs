<%- include('../partials/header') %>

<div class="container" class="order-list " style="display: flex; gap:30px">
    <aside class="profile-sidebar">
      <nav class="profile-nav">
        <a href="/user/profile" class="active">Profile</a>
        <a href="/orders">My Orders</a>
        <a href="/user/addresses">Addresses</a>
         <a href="/auth/logout">Logout</a>
      </nav>
    </aside>
  <div class="order-list-content">
    <h1>My Orders</h1>

    <% if (orders.length === 0) { %>
    <div class="no-orders">
      <p>You haven't placed any orders yet.</p>
      <a href="/products" class="btn btn-primary">Start Shopping</a>
    </div>
    <% } else { %>
    <div class="orders-list">
      <% orders.forEach(order => { %>
      <div class="order-card">
        <div class="order-header">
          <div>
            <strong>Order #<%= order.orderNumber %></strong>
            <p>
              Placed on <%= new Date(order.createdAt).toLocaleDateString() %>
            </p>
          </div>
          <div class="order-status status-<%= order.status %>">
            <%= order.status.toUpperCase() %>
          </div>
        </div>
        <div class="order-items-preview">
          <% order.items.slice(0, 3).forEach(item => { %>
          <img
            src="<%= item.product?.images[0]?.url || '/images/placeholder.jpg' %>"
            alt="<%= item.name %>"
          />
          <% }) %> <% if (order.items.length > 3) { %>
          <span class="more-items">+<%= order.items.length - 3 %> more</span>
          <% } %>
        </div>
        <div class="order-footer">
          <div class="order-total">
            Total: <strong>$<%= order.total.toFixed(2) %></strong>
          </div>
          <a href="/orders/<%= order._id %>" class="btn btn-secondary"
            >View Details</a
          >
        </div>
      </div>
      <% }) %>
    </div>
    <% } %>
  </div>
</div>

<%- include('../partials/footer') %>
