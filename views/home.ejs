<%- include('partials/header') %>

<section class="hero">
  <div class="container">
    <div class="hero-content">
      <h1>Welcome to ShopEase</h1>
      <p>Discover amazing products at unbeatable prices</p>
      <a href="/auth/login" class="btn btn-primary">Shop Now</a>
    </div>
  </div>
</section>

<% if (categories && categories.length > 0) { %>
<section class="categories-section">
  <div class="container">
    <h2>Shop by Category</h2>
    <div class="categories-grid">
      <% categories.forEach(category => { %>
        <a href="/products?category=<%= category.slug %>" class="category-card">
          <div class="category-image">
            <img src="<%= category.image?.url || '/images/placeholder.jpg' %>" alt="<%= category.name %>">
          </div>
          <h3><%= category.name %></h3>
        </a>
      <% }) %>
    </div>
  </div>
</section>
<% } %>

<% if (featuredProducts && featuredProducts.length > 0) { %>
<section class="products-section">
  <div class="container">
    <h2>Featured Products</h2>
    <div class="products-grid">
      <% featuredProducts.forEach(product => { %>
        <div class="product-card">
          <a href="/products/<%= product.slug %>">
            <div class="product-image">
              <img src="<%= product.images[0]?.url || '/images/placeholder.jpg' %>" alt="<%= product.name %>">
              <% if (product.salePrice) { %>
                <span class="badge sale-badge">Sale</span>
              <% } %>
            </div>
            <div class="product-info">
              <h3><%= product.name %></h3>
              <!-- <p class="product-category"><%= product.category && product.category.name ? product.category.name : 'Uncategorized' %></p> -->
              <div class="product-rating">
                <span class="stars">★★★★★</span>
                <span class="rating-text"><%= product.averageRating || 0 %> (<%= product.reviewCount || 0 %>)</span>
              </div>
              <div class="product-price">
                <% if (product.salePrice) { %>
                  <span class="original-price">$<%= product.price.toFixed(2) %></span>
                  <span class="sale-price">$<%= product.salePrice.toFixed(2) %></span>
                <% } else { %>
                  <span class="price">$<%= product.price.toFixed(2) %></span>
                <% } %>
              </div>
            </div>
          </a>
          <button class="btn btn-primary add-to-cart-btn" data-product-id="<%= product._id %>">Add to Cart</button>
        </div>
      <% }) %>
    </div>
  </div>
</section>
<% } %>

<% if (newArrivals && newArrivals.length > 0) { %>
<section class="products-section">
  <div class="container">
    <h2>New Arrivals</h2>
    <div class="products-grid">
      <% newArrivals.forEach(product => { %>
        <div class="product-card">
          <a href="/products/<%= product.slug %>">
            <div class="product-image">
              <img src="<%= product.images[0]?.url || '/images/placeholder.jpg' %>" alt="<%= product.name %>">
              <span class="badge new-badge">New</span>
            </div>
            <div class="product-info">
              <h3><%= product.name %></h3>
              <!-- <p class="product-category"><%= product.category && product.category.name ? product.category.name : 'Uncategorized' %></p> -->
              <div class="product-rating">
                <span class="stars">★★★★★</span>
                <span class="rating-text"><%= product.averageRating || 0 %> (<%= product.reviewCount || 0 %>)</span>
              </div>
              <div class="product-price">
                <% if (product.salePrice) { %>
                  <span class="original-price">$<%= product.price.toFixed(2) %></span>
                  <span class="sale-price">$<%= product.salePrice.toFixed(2) %></span>
                <% } else { %>
                  <span class="price">$<%= product.price.toFixed(2) %></span>
                <% } %>
              </div>
            </div>
          </a>
          <button class="btn btn-primary add-to-cart-btn" data-product-id="<%= product._id %>">Add to Cart</button>
        </div>
      <% }) %>
    </div>
  </div>
</section>
<% } %>

<% if (bestSellers && bestSellers.length > 0) { %>
<section class="products-section">
  <div class="container">
    <h2>Best Sellers</h2>
    <div class="products-grid">
      <% bestSellers.forEach(product => { %>
        <div class="product-card">
          <a href="/products/<%= product.slug %>">
            <div class="product-image">
              <img src="<%= product.images[0]?.url || '/images/placeholder.jpg' %>" alt="<%= product.name %>">
            </div>
            <div class="product-info">
              <h3><%= product.name %></h3>
              <!-- <p class="product-category"><%= product.category && product.category.name ? product.category.name : 'Uncategorized' %></p> -->
              <div class="product-rating">
                <span class="stars">★★★★★</span>
                <span class="rating-text"><%= product.averageRating || 0 %> (<%= product.reviewCount || 0 %>)</span>
              </div>
              <div class="product-price">
                <% if (product.salePrice) { %>
                  <span class="original-price">$<%= product.price.toFixed(2) %></span>
                  <span class="sale-price">$<%= product.salePrice.toFixed(2) %></span>
                <% } else { %>
                  <span class="price">$<%= product.price.toFixed(2) %></span>
                <% } %>
              </div>
            </div>
          </a>
          <button class="btn btn-primary add-to-cart-btn" data-product-id="<%= product._id %>">Add to Cart</button>
        </div>
      <% }) %>
    </div>
  </div>
</section>
<% } %>

<%- include('partials/footer') %>