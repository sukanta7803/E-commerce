<%- include('../../partials/header') %>

<div class="container">
  <div class="admin-page">
    <aside class="admin-sidebar">
      <h2>Admin Panel</h2>
      <nav class="admin-nav">
        <a href="/admin/dashboard">Dashboard</a>
        <a href="/admin/products">Products</a>
        <a href="/admin/categories">Categories</a>
        <a href="/admin/orders">Orders</a>
        <a href="/admin/customers" class="active">Customers</a>
        <a href="/admin/reviews">Reviews</a>
      </nav>
    </aside>

    <div class="admin-content">
      <h1>Manage Customers</h1>

      <div class="table-responsive">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Loyalty Points</th>
              <th>Joined</th>
            </tr>
          </thead>
          <tbody>
            <% customers.forEach(customer => { %>
              <tr>
                <td><%= customer.name %></td>
                <td><%= customer.email %></td>
                <td><%= customer.phone || 'N/A' %></td>
                <td><%= customer.loyaltyPoints %></td>
                <td><%= new Date(customer.createdAt).toLocaleDateString() %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>

      <% if (totalPages > 1) { %>
        <div class="pagination">
          <% if (currentPage > 1) { %>
            <a href="?page=<%= currentPage - 1 %>" class="btn">Previous</a>
          <% } %>

          <% for (let i = 1; i <= totalPages; i++) { %>
            <% if (i === currentPage) { %>
              <span class="current-page"><%= i %></span>
            <% } else if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) { %>
              <a href="?page=<%= i %>"><%= i %></a>
            <% } %>
          <% } %>

          <% if (currentPage < totalPages) { %>
            <a href="?page=<%= currentPage + 1 %>" class="btn">Next</a>
          <% } %>
        </div>
      <% } %>
    </div>
  </div>
</div>

<%- include('../../partials/footer') %>
